[
  {
    "objectID": "SEMs_with_lavaan/index.html",
    "href": "SEMs_with_lavaan/index.html",
    "title": "",
    "section": "",
    "text": "Reproducing published Structural Equation Models with lavaan\n\n\n\n\n\n\n\nThis post presents R scripts to reproduce published Structural Equation Modeling analyses using lavaan.\n\nThe publications\n\nJose, P. (2013). Doing statistical mediation and moderation. New York, NY: Guilford Press.  A basic three-variable mediation analysis.\nKurbanoglu, N. & Takunyaci, M. (2021). A structural equation modeling on relationship between self-efficacy, physics laboratory anxiety and attitudes. Journal of Family, Counseling and Education, 6(1), 47-56.  A basic three-variable mediation analysis using summary data.\nLittle, T., Slegers, D., & Card, N. (2006). A non-arbitrary method of identifying and scaling latent variables in SEM and MACS models. Structural Equation Modeling, 13(1), 59-72.  Methods of scaling and identification in latent variable models.\nThompson, M., Lie, Y. & Green, S. (2023). Flexible structural equation modeling approaches for analyzing means. In R. Hoyle (Ed.), Handbook of structural equation modeling (2nd ed., pp. 385-408). New York, NY: Guilford Press.  SEM approaches to ANOVA and MANOVA models.",
    "crumbs": [
      "SEMs with lavaan"
    ]
  },
  {
    "objectID": "SEMs_with_lavaan/Jose_2013/Jose_2013.html",
    "href": "SEMs_with_lavaan/Jose_2013/Jose_2013.html",
    "title": "Mediation",
    "section": "",
    "text": "Jose, P. (2013). Doing statistical mediation and moderation. New York, NY: Guilford Press.\nThis example shows how to obtain a basic three-variable mediation analysis using lavaan, including how to obtain indirect and total effects. In Chapter 3 (Basic Mediation, pp. 43-92), Jose describes a basic mediation model involving three variables: Positive Life Events; Happiness; and Gratitude. Positive Life Events has a direct effect on Happiness, but also Positive Life Events has an indirect effect on Happiness via Gratitude.\n\nLoad relevant packages\nLoad the lavaan and haven packages.\n\nlibrary(lavaan)\nlibrary(haven)   # To read SPSS data files\n\n\n\nGet the data\nThe data are available at the Guilford Press site (note: the url on page 48 is no longer a valid link). The data are contained in an SPSS data file. I use the haven package to read SPSS data files. Examine the file structure, in particular, noting the variable names. These will be needed by lavaan.\n\nurl &lt;- \"http://www.guilford.com/add/jose/mediation_example.sav\"\ndataset &lt;- data.frame(haven::read_spss(url))\n\nstr(dataset)\nhead(dataset)\nsummary(dataset)\n\nThe names for the three variables are:\n\nple - Positive Life Events\ngrat - Gratitude\nshs - Happiness\n\n\n\nThe model\nThe model is given in Figure 3.3 (p. 46), reproduced below.\n\n\n\n\n\nIn lavaan, mediation effects can be estimated using the := operator. In the diagram, the effects are labelled a, b, and c\\('\\); in the model statement, they are labelled a, b, and cpr. The labels can then be used to obtain the indirect and total effects.\n\nmodel &lt;- \"\n  # direct effect\n  shs ~ cpr * ple\n\n  # effects via the mediator\n  grat ~ a * ple\n  shs ~ b * grat\n\n  # indirect effect (a*b)\n  indirect := a * b\n\n  # total effect\n  total := cpr + (a * b) \n\"\n\n\n\nFit the model and get the results\nI’ve requested unstandardised and standardised effects, and R2 values. For the standardised effects, see the “std.all” column in the output.\n\nfit &lt;- sem(model, data = dataset)\nsummary(fit, rsquare = TRUE, standardized = TRUE)   # Check with Tables 3.2-3.5\n\nJose conducts mediation analysis using regressions. The results are presented in Tables 3.2 to 3.5 (pp. 49-52). The unstandardised and standardised coefficients in the tables agree with the lavaan output.\nThe regression summary tables show the constants (that is, the intercepts). If intercepts are required, include meanstructure = TRUE in the sem() function.\n\nfit_intercepts &lt;- sem(model, data = dataset, meanstructure = TRUE)\nsummary(fit_intercepts, rsquare = TRUE, standardized = TRUE)\n\nOn pages 53 and 54, Jose shows how to calculate and test the statistical significance of Sobel’s z-value (that is, testing the significance of the indirect effect). Do not rely on that test. Also, do not rely of the t-test for the indirect effect given in the lavaan output. It is better to calculate confidence intervals, although the symmetric confidence interval presented in Table 3.7 (p. 55) is no better than the test for Sobel’s z-value. The asymmetric CI presented in Table 3.8 (p. 56) is possibly better. In lavaan, bootstrap CIs can be calculated.\n\nfit_boot &lt;- sem(model, data = dataset, se = \"bootstrap\", bootstrap = 2000)\nsummary(fit_boot, standardized = TRUE, ci = TRUE)\nparameterEstimates(fit_boot, boot.ci.type = \"perc\")\n\n\n\n\nR code with minimal commenting\n## Chapter 3 (Basic Mediation, pp. 43-92) in:\n##   Jose, P. (2013). Doing statistical mediation and moderation.\n##   New York, NY: Guilford Press.\n\n## Load packages\nlibrary(lavaan)\nlibrary(haven)   # To read SPSS data files\n\n## Get the data from Guilford Press web site\nurl &lt;- \"http://www.guilford.com/add/jose/mediation_example.sav\"\ndataset &lt;- data.frame(haven::read_spss(url))\n\nstr(dataset)\nhead(dataset)\nsummary(dataset)\n\n## The model\nmodel &lt;- \"\n  # direct effect\n  shs ~ cpr * ple\n\n  # effects via the mediator\n  grat ~ a * ple\n  shs ~ b * grat\n\n  # indirect effect (a*b)\n  indirect := a * b\n\n  # total effect\n  total := cpr + (a * b)\n\"\n\n## Fit the model and get the summary\nfit &lt;- sem(model, data = dataset)\nsummary(fit, rsquare = TRUE, standardized = TRUE)   # Check with Tables 3.2-3.5\n\n## To get intercepts\nfit_intercepts &lt;- sem(model, data = dataset, meanstructure = TRUE)\nsummary(fit_intercepts, rsquare = TRUE, standardized = TRUE)\n\n## To get bootstrap CIs\nfit_boot &lt;- sem(model, data = dataset, se = \"bootstrap\", bootstrap = 2000)\nsummary(fit_boot, standardized = TRUE, ci = TRUE)\nparameterEstimates(fit_boot, boot.ci.type = \"perc\")",
    "crumbs": [
      "SEMs with lavaan",
      "Mediation I"
    ]
  }
]