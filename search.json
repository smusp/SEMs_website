[
  {
    "objectID": "SEMs_with_lavaan/Jose_2013/Jose_2013.html",
    "href": "SEMs_with_lavaan/Jose_2013/Jose_2013.html",
    "title": "Mediation",
    "section": "",
    "text": "Jose, P. (2013). Doing statistical mediation and moderation. New York, NY: Guilford Press.\nThis example shows how to obtain a basic three-variable mediation analysis using lavaan, including how to obtain indirect and total effects. In Chapter 3 (Basic Mediation, pp. 43-92), Jose describes a basic mediation model involving three variables: Positive Life Events; Happiness; and Gratitude. Positive Life Events has a direct effect on Happiness, but also Positive Life Events has an indirect effect on Happiness via Gratitude.\n\nLoad relevant packages\nLoad the lavaan and haven packages.\n\nlibrary(lavaan)\nlibrary(haven)   # To read SPSS data files\n\n\n\nGet the data\nThe data are available at the Guilford Press site (note: the url on page 48 is no longer a valid link). The data are contained in an SPSS data file. I use the haven package to read SPSS data files. Examine the file structure, in particular, noting the variable names. These will be needed by lavaan.\n\nurl &lt;- \"http://www.guilford.com/add/jose/mediation_example.sav\"\ndataset &lt;- data.frame(haven::read_spss(url))\n\nstr(dataset)\nhead(dataset)\nsummary(dataset)\n\nThe names for the three variables are:\n\nple - Positive Life Events\ngrat - Gratitude\nshs - Happiness\n\n\n\nThe model\nThe model is given in Figure 3.3 (p. 46), reproduced below.\n\n\n\n\n\nIn lavaan, mediation effects can be estimated using the := operator. In the diagram, the effects are labelled a, b, and c\\('\\); in the model statement, they are labelled a, b, and cpr. The labels can then be used to obtain the indirect and total effects.\n\nmodel &lt;- \"\n  # direct effect\n  shs ~ cpr * ple\n\n  # effects via the mediator\n  grat ~ a * ple\n  shs ~ b * grat\n\n  # indirect effect (a*b)\n  indirect := a * b\n\n  # total effect\n  total := cpr + (a * b) \n\"\n\n\n\nFit the model and get the results\nI’ve requested unstandardised and standardised effects, and R2 values. For the standardised effects, see the “std.all” column in the output.\n\nfit &lt;- sem(model, data = dataset)\nsummary(fit, rsquare = TRUE, standardized = TRUE)   # Check with Tables 3.2-3.5\n\nJose conducts mediation analysis using regressions. The results are presented in Tables 3.2 to 3.5 (pp. 49-52). The unstandardised and standardised coefficients in the tables agree with the lavaan output.\nThe regression summary tables show the constants (that is, the intercepts). If intercepts are required, include meanstructure = TRUE in the sem() function.\n\nfit_intercepts &lt;- sem(model, data = dataset, meanstructure = TRUE)\nsummary(fit_intercepts, rsquare = TRUE, standardized = TRUE)\n\nOn pages 53 and 54, Jose shows how to calculate and test the statistical significance of Sobel’s z-value (that is, testing the significance of the indirect effect). Do not rely on that test. Also, do not rely of the t-test for the indirect effect given in the lavaan output. It is better to calculate confidence intervals, although the symmetric confidence interval presented in Table 3.7 (p. 55) is no better than the test for Sobel’s z-value. The asymmetric CI presented in Table 3.8 (p. 56) is possibly better. In lavaan, bootstrap CIs can be calculated.\n\nfit_boot &lt;- sem(model, data = dataset, se = \"bootstrap\", bootstrap = 2000)\nsummary(fit_boot, standardized = TRUE, ci = TRUE)\nparameterEstimates(fit_boot, boot.ci.type = \"perc\")\n\n\n\n\nR code with minimal commenting\n## Chapter 3 (Basic Mediation, pp. 43-92) in:\n##   Jose, P. (2013). Doing statistical mediation and moderation.\n##   New York, NY: Guilford Press.\n\n## Load packages\nlibrary(lavaan)\nlibrary(haven)   # To read SPSS data files\n\n## Get the data from Guilford Press web site\nurl &lt;- \"http://www.guilford.com/add/jose/mediation_example.sav\"\ndataset &lt;- data.frame(haven::read_spss(url))\n\nstr(dataset)\nhead(dataset)\nsummary(dataset)\n\n## The model\nmodel &lt;- \"\n  # direct effect\n  shs ~ cpr * ple\n\n  # effects via the mediator\n  grat ~ a * ple\n  shs ~ b * grat\n\n  # indirect effect (a*b)\n  indirect := a * b\n\n  # total effect\n  total := cpr + (a * b)\n\"\n\n## Fit the model and get the summary\nfit &lt;- sem(model, data = dataset)\nsummary(fit, rsquare = TRUE, standardized = TRUE)   # Check with Tables 3.2-3.5\n\n## To get intercepts\nfit_intercepts &lt;- sem(model, data = dataset, meanstructure = TRUE)\nsummary(fit_intercepts, rsquare = TRUE, standardized = TRUE)\n\n## To get bootstrap CIs\nfit_boot &lt;- sem(model, data = dataset, se = \"bootstrap\", bootstrap = 2000)\nsummary(fit_boot, standardized = TRUE, ci = TRUE)\nparameterEstimates(fit_boot, boot.ci.type = \"perc\")",
    "crumbs": [
      "SEMs with lavaan",
      "Mediation I"
    ]
  },
  {
    "objectID": "SEMs_with_lavaan/Kurbanoglu_2021/Kurbanoglu_2021.html",
    "href": "SEMs_with_lavaan/Kurbanoglu_2021/Kurbanoglu_2021.html",
    "title": "Mediation",
    "section": "",
    "text": "Kurbanoglu, N. & Takunyaci, M. (2021). A structural equation modeling on relationship between self-efficacy, physics laboratory anxiety and attitudes. Journal of Family, Counseling and Education, 6(1), 47-56.\nThis example shows how to obtain a basic three-variable mediation analysis using lavaan, and how to obtain indirect and total effects. The three variables are: Self-Efficacy; Physics Laboratory Attitudes; and Physics Laboratory Anxiety. Self-Efficacy has a direct effect on Anxiety, but also Self-Efficacy has an indirect effect on Anxiety via Attitudes. This example also shows how to use summary data when the raw sample data are not available; in particular, how to obtain a matrix of variances and covariances from the summary data (correlations and standard deviations), and then how to use the co/variance matrix to replicate the analysis.\nExcept in this case, the analysis cannot be replicated (see below). There are problems with the paper. Rather than being an examplar, this example is included to show how to run SEM using summary data in order to check published results.\n\nLoad relevant packages\nLoad the lavaan and semmcci packages.\n\nlibrary(lavaan)\nlibrary(semmcci)  # For Monte Carlo CIs\n\n\n\nGet the data\nSample data are not available, but Table 1 (p. 50) gives correlations, means, and standard deviations, and the sample size is given on page 49. From these, the co/variance matrix can be obtained. The correlations do not need to be in the form of a matrix. All that is required is a vector of the lower triangle of correlations with ones along the diagonal.\n\ncor &lt;- c(\n   1,\n   0.30,  1,\n  -0.42, -0.32,  1)\n\nsds &lt;- c(8.81, 7.95, 18.30)\nmeans &lt;- c(56.57, 40.39, 68.22)\nn &lt;- 513\n\nThe three variables need names, making sure the order is the same as in Table 1. The names used here are:\n\nSE - Self-Efficacy\nAtt - Physics Laboratory Attitudes\nAnx - Physics Laboratory Anxiety\n\n\nnames &lt;- c(\"Att\", \"SE\", \"Anx\")\n\nThe getCov() function from the lavaan package is used to get the co/variance matrix.\n\ncov &lt;- lavaan::getCov(cor, sds = sds, names = names)\n\n\n\nThe model\nThe model is given in Figure 1 (p. 51), reproduced below.\n\n\n\n\n\nKurbanoglu & Takunyaci (K&T) do not estimate the indirect effect; only the “a” and “b” paths. In lavaan, indirect effects can be estimated using the := operator. In the diagram, the effects are labelled a, b, and c\\('\\); in the model statement, they are labelled a, b, and cpr. The labels can then be used to obtain the indirect and total effects.\n\nmodel &lt;- \"\n  # direct effect\n  Anx ~ cpr * SE\n\n  # effects via the mediator\n  Att ~ a * SE\n  Anx ~ b * Att\n\n  # indirect effect (a * b)\n  ab := a * b\n\n  # total effect\n  total := cpr + (a * b)\n\"\n\n\n\nFit the model and get the results\nIn Figure 1, K&T present standardised estimates and R2 values; so they are requested here (for standardised estimates, see “std.all” column in the output).\n\nfit &lt;- sem(model, sample.cov = cov, sample.nobs = n)\nsummary(fit, rsquare = TRUE, standardized = TRUE, fit.measures = TRUE)\n\nI’ve requested a selection of fit measures. Why fit measures? Afterall, the model is saturated, and all fit measures should indicate a perfect fit. Something has gone awry for K&T. At the bottom of page 50, they state that the model is saturated. As a consequence, \\(\\upchi\\)2 and RMSEA should be zero, and GFI, AGF, CFI, NFI, RFI, and IFI should all be one; yet values are given (p. 50) to indicate a less than perfect fit. I’m not sure how this could have come about, or why the error was not picked up during review.\nIf the intercepts are required, include sample.mean = means in the sem() function.\n\nfit_intercepts &lt;- sem(model, sample.cov = cov, sample.nobs = n,\n   sample.mean = means)\nsummary(fit_intercepts, rsquare = TRUE, standardized = TRUE)\n\nDo not rely on the t-tests, especially for indirect effects. Often bootstrap confidence intervals are calculated, but bootstrapping requires the raw sample data. Instead of bootstrap CIs, Monte Carlo CIs can be calculated using the MC() function from the semmcci package.\n\nsemmcci::MC(fit, R = 50000, alpha = 0.05)\n\n\n\n\nR code with minimal commenting\n## Kurbanoglu, N. & Takunyaci, M. (2021). A structural equation modeling\n## on relationship between self-efficacy, physics laboratory anxiety\n## and attitudes. Journal of Family, Counseling and Education, 6(1), 47-56.\n\n## Load packages\nlibrary(lavaan)\nlibrary(semmcci)  # For Monte Carlo CIs\n\n## Get the data from Table 1\ncor &lt;- c(\n   1,\n   0.30,  1,\n  -0.42, -0.32,  1)\n\nsds &lt;- c(8.81, 7.95, 18.30)\nmeans &lt;- c(56.57, 40.39, 68.22)\nn &lt;- 513\n\n## Get the variable names\nnames &lt;- c(\"Att\", \"SE\", \"Anx\")\n\n## Get the co/variance matrix\ncov &lt;- lavaan::getCov(cor, sds = sds, names = names)\n\n## The model\nmodel &lt;- \"\n  # direct effect\n  Anx ~ cpr * SE\n\n  # effects via the mediator\n  Att ~ a * SE\n  Anx ~ b * Att\n\n  # indirect effect (a * b)\n  ab := a * b\n\n  # total effect\n  total := cpr + (a * b)\n\"\n\n## Fit the model and get the summary\n#  Compare with Figure 1\nfit &lt;- sem(model, sample.cov = cov, sample.nobs = n)\nsummary(fit, rsquare = TRUE, standardized = TRUE, fit.measures = TRUE)\n\n## To get intercepts\nfit_intercepts &lt;- sem(model, sample.cov = cov, sample.nobs = n,\n   sample.mean = means)\nsummary(fit_intercepts, rsquare = TRUE, standardized = TRUE)\n\n## To get Monte Carlo CIs\nsemmcci::MC(fit, R = 50000, alpha = 0.05)",
    "crumbs": [
      "SEMs with lavaan",
      "Mediation II"
    ]
  },
  {
    "objectID": "SEMs_with_lavaan/index.html",
    "href": "SEMs_with_lavaan/index.html",
    "title": "",
    "section": "",
    "text": "Reproducing published Structural Equation Models with lavaan\n\n\n\n\n\n\n\nThis post presents R scripts to reproduce published Structural Equation Modeling analyses using lavaan.\n\nThe publications\n\nJose, P. (2013). Doing statistical mediation and moderation. New York, NY: Guilford Press.  A basic three-variable mediation analysis.\nKurbanoglu, N. & Takunyaci, M. (2021). A structural equation modeling on relationship between self-efficacy, physics laboratory anxiety and attitudes. Journal of Family, Counseling and Education, 6(1), 47-56.  A basic three-variable mediation analysis using summary data.\nLittle, T., Slegers, D., & Card, N. (2006). A non-arbitrary method of identifying and scaling latent variables in SEM and MACS models. Structural Equation Modeling, 13(1), 59-72.  Methods of scaling and identification in latent variable models.\nThompson, M., Lie, Y. & Green, S. (2023). Flexible structural equation modeling approaches for analyzing means. In R. Hoyle (Ed.), Handbook of structural equation modeling (2nd ed., pp. 385-408). New York, NY: Guilford Press.  SEM approaches to ANOVA and MANOVA models.",
    "crumbs": [
      "SEMs with lavaan"
    ]
  },
  {
    "objectID": "Drawing_SEMs/index.html",
    "href": "Drawing_SEMs/index.html",
    "title": "",
    "section": "",
    "text": "Drawing Structural Equation Models with TikZ\n\n\n\n\n\n\n\nThis post presents TikZ scripts to draw diagrams of Structural Equation Models."
  }
]